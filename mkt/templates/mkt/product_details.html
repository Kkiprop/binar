{% extends 'mkt/base.html' %}
{% block start %}
{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>{{ product.slug }}</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->

  <!-- =======================================================
  * Template Name: NiceAdmin - v2.4.0
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <main id="main" class="main">

    <div class="pagetitle">
      <h1>{{ product.name }}</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item">Products</li>
          <li class="breadcrumb-item active">Details</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->



  <section class="section">
      <div class="row align-items-top">
        <div class="col-lg-6">

          <!-- Slides with indicators -->
              <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                  {% if product.thumbnail %}
                  <div class="carousel-item active">
                    <img src="{{ product.thumbnail.url }}" class="d-block w-100" alt="..." style="height:300px">
                  </div>
                  {% endif %}
                  {% if product.thumbnail1 %}
                  <div class="carousel-item">
                    <img src="{{ product.thumbnail1.url }}" class="d-block w-100" alt="..." style="height:300px">
                  </div>
                  {% endif %}
                  {% if product.thumbnail2 %}
                  <div class="carousel-item">
                    <img src="{{ product.thumbnail2.url }}" class="d-block w-100" alt="..." style="height:300px">
                  </div>
                  {% endif %}
                </div>


                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>

              </div><!-- End Slides with indicators -->

        </div>
      </div>

  </section>

  <section class="section">
      <div class="row">
        <div class="col-lg-6">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">{{ product.name }}</h5>

              <!-- Default Tabs -->
              <ul class="nav nav-tabs d-flex" id="myTabjustified" role="tablist">
                <li class="nav-item flex-fill" role="presentation">
                  <button class="nav-link w-100 active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-justified" type="button" role="tab" aria-controls="home" aria-selected="true">Details</button>
                </li>
                <li class="nav-item flex-fill" role="presentation">
                  <button class="nav-link w-100" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-justified" type="button" role="tab" aria-controls="profile" aria-selected="false">Description</button>
                </li>
                <li class="nav-item flex-fill" role="presentation">
                  <button class="nav-link w-100" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-justified" type="button" role="tab" aria-controls="contact" aria-selected="false">Reviews</button>
                </li>
              </ul>
              <div class="tab-content pt-2" id="myTabjustifiedContent">
                <div class="tab-pane fade show active" id="home-justified" role="tabpanel" aria-labelledby="home-tab">
                  <p class="card-text text text-success"><strong>Ksh.{{ product.price }}</strong></p>
                  <p class="card-text text text-warning"><i class="bi bi-geo-alt"></i>{{ product.location }}</p>
                  <p class="card-text text text-success">{{ product.created_on }}</p>

                </div>
                <div class="tab-pane fade" id="profile-justified" role="tabpanel" aria-labelledby="profile-tab">
                  <p class="card-text text text-success">{{ product.description }}</p><br>
                </div>
                <div class="tab-pane fade" id="contact-justified" role="tabpanel" aria-labelledby="contact-tab">
                  Saepe animi et soluta ad odit soluta sunt. Nihil quos omnis animi debitis cumque. Accusantium quibusdam perspiciatis qui qui omnis magnam. Officiis accusamus impedit molestias nostrum veniam. Qui amet ipsum iure. Dignissimos fuga tempore dolor.
                </div>
              </div><!-- End Default Tabs -->

            </div>
          </div>
        </div>
      </div>
  </section>

  <!-- Add Comment  -->
  <section class="section dashboard">
      <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-8">
          <div class="row">
            <div class="col-lg-9 col-lg-8">
              <div class="card info-card sales-card">

                <div class="card-body">
                  <h5 class="card-title">Contact This Seller <span>| Today</span></h5>

                <div class="news">
                <div class="post-item clearfix">
                  <img src="{{ product.seller.profile.avatar.url }}" alt="" class="rounded-circle" style="height:60px; width: 60px;">
                  <h4><a href="{% url 'mkt:my_profile' %}">{{ product.seller.profile.name }}</a></h4>
                  <p>{{ product.seller.profile.about }}</p>

                  <a class="d-grid gap-2 mt-3" pt-5 href="#">
                    <button type="button" class="btn btn-outline-success btn-sm">
                    <i class="bi bi-telephone-outbound-fill pr-5"></i>    {{ product.seller.profile.phone }}
                    </button>
                  </a>
                </div>

                <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
                <div class="social-links mt-0">
                  <a href="#" class="twitter"><i class="bi bi-whatsapp"></i></a>
                  <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                  <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                  <a href="#" class="linkedin"><i class="bi bi-telephone"></i></a>
                </div>
                </div>

                </div>
                </div>

              </div>
            </div>
          </div>
        </div>

      </div>
  </section>
  <!-- Add Comment  -->

  <!-- Add Comment  -->
  <section class="section">
      <div class="row">
        <div class="col-lg-6">

          <div class="card">
            <div class="card-body">

              <!-- Basic Modal -->
              {% if user.is_authenticated %}
              <a class="d-grid gap-2 mt-3" href="{% url 'mkt:add_product' %}">
              <button type="button" class="btn btn-outline-primary btn-block" data-bs-toggle="modal" >
                Add New Product
              </button>
              </a>
              {% else %}
              <a class="d-grid gap-2 mt-3" href="{% url 'account_login' %}">
              <button type="button" class="btn btn-outline-primary btn-block" data-bs-toggle="modal" >
                Add New Product
              </button>
              </a>
              {% endif %}

              <div class="d-grid gap-2 mt-3">
              <button type="button" class="btn btn-outline-primary btn-block" data-bs-toggle="modal" data-bs-target="#basicModal">
                Review This Product
              </button>
              </div>
              
              <div class="modal fade" id="basicModal" tabindex="-1">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">Leave us a review!</h5>
                      <button type="button" class="btn-close " data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    {% if user.is_authenticated %}
                    <div class="modal-body">
                    <form method="post" enctype="multipart/form-data" action="">
                      <div class="row mb-3">
                        <div class="col-sm-10">
                          {% csrf_token %}
                          {{ comment_form|crispy }}
                        </div>
                      </div>

                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Write Review</button>
                    </div>
                  </form>
                  {% else %}
                  <div class="alert alert-warning alert-dismissible fade show" role="alert">
                    <strong>Log in to review this item!</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                  {% endif %}

                  </div>
                </div>
              </div><!-- End Basic Modal-->

            </div>
          </div>

        </div>
      </div>
  </section>
  <!-- Add Comment  -->

  <section class="section dashboard">
      <div class="row">
        <div class="col-lg-6">
          <!-- Recent Activity -->
          <div class="card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

            <div class="card-body">
              <h5 class="card-title">Comments <span>| Today</span></h5>

              <div class="activity">
                {% for comment in comments %}

                <div class="activity-item d-flex">
                  <div class="activite-label">{{ comment.created_on|date:'y-m-d' }}</div>
                  <i class='bi bi-circle-fill activity-badge text-success align-self-start'></i>
                  <div class="activity-content"><h6>{{ comment.commentor.profile.name }}</h6>
                    {{ comment.body }}
                  </div>
                </div><!-- End activity item-->
                {% endfor %}
              </div>

            </div>
          </div><!-- End Recent Activity -->
        </div>
      </div>
  </section>

  <section class="section dashboard">
      <div class="row">
        <div class="col-lg-6">

          <!-- News & Updates Traffic -->
          <div class="card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

            <div class="card-body pb-0">
              <h5 class="card-title">Related Items <span>| Today</span></h5>

              <div class="news">
                
                {% for item in related %}
                <div class="post-item clearfix">
                  {% if item.thumbnail %}
                  <img src="{{ item.thumbnail.url }}" alt="" style="height:60px; width:75px">
                  {% endif %}
                  <h4><a href="{{ item.get_absolute_url }}">{{ item.name }}</a></h4>
                  <p class="card-text text text-success"><strong>Ksh.{{ item.price }}</strong></p>
                </div>
                {% endfor %}

                <hr>
                
              </div><!-- End sidebar recent posts-->

            </div>
          </div><!-- End News & Updates -->

        </div>
        <!-- ======= Footer ======= -->
      </div>
  </section>

  </main>

</body>

</html>
{% endblock %}